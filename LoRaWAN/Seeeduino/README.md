Getting Started with the LoRaWAN Kit
====================================

Installation
------------

1. Plug the Seeeduino LoRaWAN board into the USB port of the computer.
2. Open the _DemoApp_ folder.
3. Double-click the _DemoApp_ file to open in Arduino.
7. Select the _File->Preferences_ menu item.
8. Add "https://raw.githubusercontent.com/Seeed-Studio/Seeed_Platform/master/package_seeeduino_boards_index.json" to the _Additional Board Manager URLs_ field and click _OK_.
9. Select the _Tools->Board->Boards Manager..._ menu item.
10. Enter _Seeeduino_ in the search field and then select and install the Seeeduino SAMD Boards item.
11. After installation, click _Close_.
12. Select the _Tools->Board->Seeeduino LoRaWAN_ menu item
13. Select the _Tools->Ports->Seeeduino LoRaWAN_ menu item.
14. Click the magnifying glass icon at the top right labelled _Serial Monitor_.
16. In the text field at the top of the window, type `AT+ID` and press return.
17. If something similar to the following lines appear,then rejoice in having connected to the LoRa modem! If not, try again, check the steps so far, or seek help.

`+ID: DevAddr, 00:EF:14:E7`\
`+ID: DevEui, 47:86:C5:8B:00:44:00:42`\
`+ID: AppEui, 70:B3:D5:7E:D0:00:BF:CA`

18. Record the results, such as taking a screenshot, as they will be needed later.

Connect to LoRaWAN
------------------

In the _DemoApp_ window, find the line that starts with `const char *DevEUI`, it is in the first 10 lines of the program.
Change the series of `0s` to the line of digits that appeared after `DevEUI` in the serial monitor. For example, if when you issued `AT+ID` it returned `4786C58B00440042`, then change the `DevEUI` to look like this:
* `const char *DevEUI = "4786C58B00440042";`

We need to keep our data secret which can be done by setting the AppKey. The AppKey is used to generate two other secret keys, the NwkSKey and the AppsKey which will allow for doubly encrypting our data. This protects our data on radio transmission to the gateway and internet transmission to the things network.

Find the line that starts with `const char *AppKey`, it is underneath `const char *DevEUI`.
Change the series of 0s to the following sequence `"68499B7684CBDC095401CE7910EB2344"`. It should look like this:
* `const char *AppKey = "68499B7684CBDC095401CE7910EB2344";`

21. Save your changes and then click the _tick_ button at the top left of the _DemoApp_ window.
Some red and white text output should appear in the black section at the bottom of the window.
* If _Done compiling_ appears in the green section above the black section, move to the next step.
* If _Done compiling_ does not appear, double check each of the steps so far or seek some help.
22. Click the "arrow" button next to the "tick" button to program your changes to the Seeeduino LoRaWAN board. After about 15 seconds _Done uploading_ should appear in the green section. If not, double check the connections or seek help.
23. Take a look at the Serial Monitor. If following appears, then congratulations, you've just connected a new node to the LoRaWAN! If not, double check the steps so far or seek help.

`+JOIN: Network joined`\
`+JOIN: NetID 000013 DevAddr 26:00:1E:CA`\
`+JOIN: Done`

Verify transmission to Internet
-------------------------------

24. Open the Ubidots website in a browser and use the username and password to login:
* https://app.ubidots.com/accounts/signin/
* Username: `NewcastleIoTPioneers`
* Password: `m(pDTUGVAg48`
25. Click the _Devices_ link near the centre top.
26. Devices are named by their `DevEUI`. If you can find a device matching your `DevEUI` then rejoice in having transmitted your first LoRaWAN message! If not, try refreshing the website, or seek some help.
27. Click on your device to see the data that was transmitted. The 10 variables include 9 data variables generated by the Seeeduino LoRaWAN board and 1 more containing all the metadata produced by the LoRaWAN system. For reference, they are:
* _data1_ - battery voltage in volts
* _data2_ - battery charging status
* _data3_ - not assigned
* _data4_ - not assigned
* _data5_ - not assigned
* _data6_ - not assigned
* _message_ - internal timestamp. Also contains _Context_ data on the device ID, received signal strength indicator, signal to noise ratio and other radio transmission properties.

28. These raw values are a little hard to work with, so let's create some friendlier variables. Click the _Add Variable_ box at the end of the variables and select _Derived_.
29. Select your device and then select the _data1_ variable.
30. In the edit box that appears, type `/16000` to divide data1 by 16000.
31. Click save and then name the new variable _Battery Voltage_. Note it can take a while for the variable to be saved. This should give you the board's battery voltage. If the battery is fully charged this should be 4.2V. If the board is only powered by the battery then this value should slowly decrease.


Create a Dashboard
------------------

32. Time to put this LoRaWAN data to use. Click the _Dashboards_ link near the centre top of the Ubidots website.
33. Click the Dashboards icon near the top left of the window.
34. Click the small orange **"+"** icon to create a new Dashboard.
35. Give your new Dashboard a name, click the "tick" button, and then click the Dashboard name to open your new Dashboard.
42. Let's create your first widget. Let's try a Gauge next. Click the big orange "+" icon to add another widget, select "Indicator" and then "Gauge".
42. Select your device and then select _data1_ (battery voltage).
43. Set the min value to 3000 and the max value to 5000 and click _Finish_.
44. What about a map? Try adding a map widget. Use the _satellites_ variable and the lat/lng context data will be automatically picked. Note it can take a while to get a GPS fix.
45. Check out the _Grove Ardiuno Starter Kit_ for some other ideas.


Get Creative
------------

46. Think about some of the possibilities:
* What could this data be used for?
* Are there any other sensors (eg. moisture, proximity, sound) that might be useful?
* Is there an Internet service (eg. email, SMS, Twitter, IFTTT) that could be triggered via an event?
* What about untethering the board from the computer and running off a battery?


47. Start experimenting. Keep these guidelines in mind:
* All the data in Ubidots is visible to everyone in the workshop. That means you can add data from other people's things to your dashboard!
* That also means you must be careful not to modify dashboards or devices you did not create, or you risk ruining someone else's work.
* To change the data sent by the One, go back to Arduino and modify the code.
* Note that regardless of the data you send, it must fit the existing 6 data value pattern. The first three data values are unsigned integers and the last three are signed integers. Seek help if you'd like to use the 12 bytes in some other way.
* You're not restricted to Ubidots. If there's another service you'd like to send the data to, either use Ubidots events to push it there, or seek help to redirect the LoraWAN backend.
